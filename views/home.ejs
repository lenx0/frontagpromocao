<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>EJS Is Fun</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            padding-top: 50px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>

        const _tableList =
            "<table class='table'>" +
            "    <thead>" +
            "        <tr>" +
            "            <th scope='col'>Titulo</th>" +
            "            <th scope='col'>Tipo</th>" +
            "            <th scope='col'>Status</th>" +
            "            <th scope='col'>Data Inicial</th>" +
            "            <th scope='col'>Data Final</th>" +
            "        </tr>" +
            "    </thead>" +
            "    <tbody>" +
            "{items}" +
            "    </tbody>" +
            "</table>";

        const _tableItem =
            "<tr>" +
            "    <td scope='row'>{title}</td>" +
            "    <td>{type}</td>" +
            "    <td>{status}</td>" +
            "    <td>{dateStart}</td>" +
            "    <td>{dateEnd}</td>" +
            "</tr>";

    </script>
    <script>
        const url_base = 'http://localhost:3001/v1/campaign';
        function listar() {
            fetch(`${url_base}/622a2eba1d821d770d81238e`).then(response => response.json())
                .then(result => {
                    carregarLista(response);
                })
        }
        function gravar() {
            fetch(`${url_base}`).then(response => response.json())
                .then(result => {
                    gravarItem(item);
                })
        }
        function carregarLista(request) {
            var conteudoItems = "";

            request.campaign.map(item => {

                var tableItem = _tableItem
                    .replace("{title}", item.title)
                    .replace("{type}", item.type)
                    .replace("{status}", item.status)
                    .replace("{dateStart}", item.date_start)
                    .replace("{dateEnd}", item.date_end)
                    ;

                conteudoItems += tableItem;
            });
            var tableList = _tableList
                .replace("{items}", conteudoItems)
                ;

            var listaItem = document.getElementById("listaItem");

            listaItem.innerHTML = tableList;
        }
    </script>
</head>

<body class="container">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <header>
    </header>
    <main>
        <div class="jumbotron row-sm-1" align="center">
            <h1>CAMPANHA ALTO GIRO</h1>
        </div>
        <form>
            <div class="form-group">
                <label>Título</label>
                <input type="title" class="form-control" id="inputTitle" placeholder="Insira o título">
            </div>
            <div class="form-row">
                <div class="form-group col-md-2">
                    <label for="inputType">Tipo</label>
                    <select id="inputType" class="form-control">
                        <option selected="">Escolher...</option>
                        <option>Campanha</option>
                        <option>Promoção</option>
                    </select>
                </div>
                <div class="form-group col-md-2">
                    <label for="inputStatus">Status</label>
                    <select id="inputStatus" class="form-control">
                        <option selected="">Escolher...</option>
                        <option>Ativo</option>
                        <option>Inativo</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="date-start">Início</label><br>
                <input id="date-start" type="datetime-local">
            </div>
            <div class="form-group">
                <label for="date-end">Termino</label><br>
                <input id="date-end" type="datetime-local">
            </div>
            <div class="form-row">
                <div class="form-group col-md-5">
                    <label for="inputHost">Host</label>
                    <input type="title" class="form-control" id="inputHost" placeholder="smtp.office365.com">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-2">
                    <label for="inputPort">Porta</label>
                    <input type="text" class="form-control" id="inputPort" placeholder="Insira a porta">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-5">
                    <label for="inputName">Nome</label>
                    <input type="text" class="form-control" id="inpuName" placeholder="Insira o nome">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-5">
                    <label for="inputEmail">Email</label>
                    <input type="email" class="form-control" id="inputEmail" placeholder="email@example.com">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-5">
                    <label for="inputUser">Usuário</label>
                    <input type="text" class="form-control" id="inputUser" placeholder="user@example.com">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-5">
                    <label for="inpuPassword">Senha</label>
                    <input type="text" class="form-control" id="inpuPassword" placeholder="Senha">
                </div>
            </div>
        </form>
        <div class="form-group">
            <button onclick="submitSucessAlert()" type="submit" class="btn btn-primary">Limpar</button>
            <button onclick="listar()" type="submit" class="btn btn-primary">Buscar</button>
            <button type="submit" class="btn btn-primary">Salvar</button>
            <button type="submit" class="btn btn-primary">Excluir</button>
        </div>
        <div class="form-group">
            <label for="pageContent">Conteúdo da página</label><br>
            <textarea id="pageContent" name="pageContent" rows="5" cols="38">
        </textarea>
        </div>
        <div class="form-group">
            <label for="emailContent">Lista de Emails</label><br>
            <textarea id="emailContent" name="emailContent" rows="5" cols="38">
        </textarea>
        </div>
        <div id="listaItem">
        </div>
    </main>
    <script>
        function submitSucessAlert() {
            alert("Sucess!!!")
        }
    </script>
</body>

</html>